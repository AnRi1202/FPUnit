# FPUnit: Multi-format Floating-Point Arithmetic Unit

A research-oriented repository for synthesizing and simulating high-performance Floating-Point Units (FPUs) with multi-format support (FP16/FP32), extending designs originally generated by **FloPoCo**.

## Overview

This project explores hardware resource sharing techniques between different floating-point precisions. The core implementation (`fpall_shared`) supports combined operations for:
- **Formats**: IEEE-754 Single Precision (FP32) and Half Precision (FP16).
- **Operations**: Addition, Subtraction, Multiplication, Division, and Square Root.
- **Key Feature**: SIMD-like execution for FP16 (processing two lanes simultaneously) while utilizing the same hardware for a single FP32 operation.

## Project Structure

```text
.
├── src/rtl/                         # RTL Source Files
│   ├── src_shared_combine_sv/       # SystemVerilog implementation with logic sharing
│   │   ├── fpall_shared.sv          # Main combined FPU module
│   │   ├── fpall_pkg.sv             # Package for types and enums
│   │   └── utils/                   # Sub-modules (shifters, normalizers, etc.)
│   ├── original/                    # Original VHDL designs from FloPoCo
│   └── vhdl_src_combine/            # Combined VHDL reference designs
├── simulation/                      # Simulation Environment
│   ├── Makefile                     # Central Makefile for simulation
│   ├── scripts/                     # Tool-specific scripts (xrun.mk, msim.mk)
│   └── filelists/                   # Simulation file lists (.f files)
├── synopsysDC/                      # Synthesis Environment (Design Compiler)
│   ├── run_ppa.tcl                  # Script for PPA (Power, Performance, Area) analysis
│   └── synthesis.tcl                # General synthesis script
├── cadenceInnovus/                  # Backend P&R scripts
└── primetime/                       # Static Timing Analysis (STA)
```

## Getting Started

### Prerequisites

- **Simulation**: Cadence Xcelium (`xrun`) or Mentor Graphics ModelSim/QuestaSim (`vsim`).
- **Synthesis**: Synopsys Design Compiler (`dc_shell`).

### Simulation

Navigate to the `simulation` directory and use the Makefile.

```bash
cd simulation

# Run default simulation (shared logic, Xcelium)
make sim

# Run with specific tool and target
make sim TOOL=msim TARGET=shared-all
```

The `shared-all` target runs tests for all supported operations (Add, Mul, Div, Sqrt) across both FP16 and FP32 formats.

### Synthesis & PPA Analysis

Navigate to the `synopsysDC` directory to perform synthesis and area/power/timing extraction.

```bash
cd synopsysDC

# Run PPA analysis script
make run SCRIPT=run_ppa.tcl
```

Results and logs will be generated in the `synopsysDC` folder, including `.log` files and area reports.

